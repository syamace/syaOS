<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>iPod - syaOS Docs</title>
  <link rel="icon" href="/icons/mac-192.png">
  <style>
    @font-face { font-family: "Geneva"; src: url("/fonts/geneva-12.woff2") format("woff2"); }
    @font-face { font-family: "Monaco"; src: url("/fonts/monacottf.woff2") format("woff2"); }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: "Geneva", system-ui, sans-serif;
      font-size: 12px;
      line-height: 1.5;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      background: #fff;
      color: #000;
    }
    a { color: #00f; }
    a:hover { text-decoration: none; }
    code, pre { font-family: "Monaco", monospace; font-size: 11px; }
    code { background: #f0f0f0; padding: 1px 4px; }
    pre { background: #f8f8f8; border: 1px solid #ddd; padding: 12px; overflow-x: auto; margin: 12px 0; }
    pre code { background: none; padding: 0; }
    
    /* Layout */
    .header {
      position: sticky; top: 0; z-index: 10;
      background: #fff; border-bottom: 1px solid #ccc;
      padding: 0 16px; height: 40px;
      display: flex; align-items: center; justify-content: space-between;
    }
    .header-left { display: flex; align-items: center; gap: 8px; }
    .header-left img { width: 20px; height: 20px; display: block; }
    .header-left span { font-weight: bold; }
    .header-right { display: flex; align-items: center; gap: 16px; }
    .header-right a { text-decoration: none; color: #333; }
    .header-right a:hover { color: #000; }
    .header-right .github { display: flex; align-items: center; gap: 4px; }
    .header-right .launch { background: #000; color: #fff; padding: 4px 12px; }
    
    .container { display: flex; max-width: 1100px; margin: 0 auto; }
    
    .sidebar {
      width: 220px; flex-shrink: 0;
      border-right: 1px solid #ccc;
      padding: 12px;
      position: sticky; top: 40px;
      height: calc(100vh - 40px);
      overflow-y: auto;
    }
    .sidebar a {
      display: block; padding: 4px 8px; margin: 2px 0;
      text-decoration: none; color: #333;
      font-size: 11px;
    }
    .sidebar a:hover { background: #f0f0f0; }
    .sidebar a.active { background: #000; color: #fff; }
    
    /* Tree hierarchy styles */
    .nav-group { margin: 4px 0; }
    .nav-spacer { width: 8px; flex-shrink: 0; } /* Same width as toggle arrow */
    .nav-no-toggle { cursor: default; }
    .nav-toggle {
      display: flex; align-items: center; gap: 4px;
      background: none; border: none; padding: 0; width: 100%;
      cursor: pointer; text-align: left; font: inherit; color: inherit;
    }
    .nav-toggle:hover { background: #f0f0f0; }
    .nav-toggle svg { flex-shrink: 0; opacity: 0.6; transition: transform 0.2s; }
    .nav-toggle a { flex: 1; padding: 4px 8px; margin: 0; pointer-events: auto; font-size: 11px; }
    .nav-children { margin-left: 12px; overflow: hidden; transition: height 0.2s ease-out; }
    .nav-child { padding-left: 8px !important; font-size: 10px !important; color: #555 !important; }
    .nav-child:hover { color: #000 !important; }
    .nav-child.active { color: #fff !important; }
    
    .content { flex: 1; padding: 24px 32px; min-width: 0; }
    
    /* Typography */
    h1 { font-size: 18px; border-bottom: 1px solid #ccc; padding-bottom: 8px; margin-bottom: 16px; }
    hr { border: none; border-top: 1px solid #ccc; margin: 16px 0; }
    h2 { font-size: 14px; margin: 24px 0 12px; }
    h3 { font-size: 12px; margin: 16px 0 8px; }
    h4 { font-size: 11px; margin: 12px 0 6px; font-weight: bold; }
    p { margin: 8px 0; }
    ul, ol { margin: 8px 0 8px 20px; }
    li { margin: 4px 0; }
    
    /* Tables */
    table { width: 100%; border-collapse: collapse; margin: 12px 0; font-size: 11px; }
    th, td { border: 1px solid #ccc; padding: 6px 8px; text-align: left; }
    th { background: #f0f0f0; font-weight: bold; }
    
    /* Mermaid diagrams */
    pre.mermaid { background: none; border: none; padding: 0; text-align: center; margin: 16px 0; }
    .mermaid svg { max-width: 100%; height: auto; font-family: "Geneva", system-ui, sans-serif !important; }
    .mermaid .node rect, .mermaid .node circle, .mermaid .node polygon { fill: #f8f8f8 !important; stroke: #ccc !important; }
    .mermaid .edgeLabel { background: #fff !important; font-size: 10px !important; }
    .mermaid .label { font-size: 10px !important; }
    .mermaid .nodeLabel { font-size: 10px !important; }
    .mermaid .cluster-label { font-size: 10px !important; }
    .mermaid .messageText { font-size: 10px !important; }
    .mermaid .actor { font-size: 10px !important; }
    .mermaid .labelText { font-size: 10px !important; }
    
    /* Collapsible details */
    details { margin: 8px 0; }
    details summary { 
      cursor: pointer; 
      color: #666; 
      font-size: 11px;
      padding: 4px 0;
      user-select: none;
    }
    details summary:hover { color: #000; }
    details[open] summary { margin-bottom: 8px; }
    details ul { margin-top: 0; }
    
    /* Navigation */
    .nav { display: flex; justify-content: space-between; margin-top: 32px; padding-top: 16px; border-top: 1px solid #ccc; }
    .nav a { text-decoration: none; color: #333; }
    .nav a:hover { color: #000; }
    
    /* Mobile menu button */
    .menu-btn { 
      display: none; 
      background: transparent; 
      border: 0; 
      padding: 4px; 
      cursor: pointer; 
      line-height: 1;
      -webkit-appearance: none;
      appearance: none;
      margin: 0;
      color: inherit;
    }
    .menu-btn svg { display: block; width: 18px; height: 18px; pointer-events: none; }
    @media screen and (max-width: 768px) {
      .menu-btn { 
        display: -webkit-flex !important;
        display: flex !important; 
        -webkit-align-items: center;
        align-items: center; 
        -webkit-justify-content: center;
        justify-content: center;
      }
      .header-left img { display: none !important; }
      .sidebar { 
        position: fixed; left: -240px; top: 40px; 
        width: 240px; height: calc(100vh - 40px);
        background: #fff; z-index: 20;
        transition: left 0.2s;
      }
      .sidebar.open { left: 0; box-shadow: 2px 0 8px rgba(0,0,0,0.1); }
      .content { padding: 16px; }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="header-left">
      <button class="menu-btn" onclick="document.querySelector('.sidebar').classList.toggle('open')">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12h18M3 6h18M3 18h18"/></svg>
      </button>
      <a href="/" style="display:flex;align-items:center;gap:8px;text-decoration:none;color:inherit">
        <img src="/icons/mac-192.png" alt="syaOS" width="20" height="20">
        <span>syaOS</span>
      </a>
      <span style="color:#999">/</span>
      <span style="color:#666">Docs</span>
    </div>
    <div class="header-right">
      <a href="https://github.com/syamace/syaOS" target="_blank" class="github">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor"><path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z"/></svg>
        GitHub
      </a>
      <a href="/" class="launch">Launch</a>
    </div>
  </header>
  
  <div class="container">
    <nav class="sidebar">
      <div class="nav-group ">
  <button class="nav-toggle" onclick="toggleNavGroup(this)" aria-expanded="false">
    <svg width="8" height="8" viewBox="0 0 8 8" fill="currentColor" style="transition: transform 0.2s; transform: rotate(0deg);">
      <path d="M2 0v8l4-4z"/>
    </svg>
    <a href="/docs/overview" class="">1. Overview</a>
  </button>
  <div class="nav-children" style="display: none;">
    <a href="/docs/architecture" class="nav-child ">1.1 Architecture & Build</a>
    <a href="/docs/api-architecture" class="nav-child ">1.2 API Architecture</a>
  </div>
</div>
<div class="nav-group expanded">
  <button class="nav-toggle" onclick="toggleNavGroup(this)" aria-expanded="true">
    <svg width="8" height="8" viewBox="0 0 8 8" fill="currentColor" style="transition: transform 0.2s; transform: rotate(90deg);">
      <path d="M2 0v8l4-4z"/>
    </svg>
    <a href="/docs/apps" class="">2. Apps</a>
  </button>
  <div class="nav-children" style="display: block;">
    <a href="/docs/chats" class="nav-child ">2.1 Chats</a>
    <a href="/docs/internet-explorer" class="nav-child ">2.2 Internet Explorer</a>
    <a href="/docs/ipod" class="nav-child active">2.3 iPod</a>
    <a href="/docs/karaoke" class="nav-child ">2.4 Karaoke</a>
    <a href="/docs/textedit" class="nav-child ">2.5 TextEdit</a>
    <a href="/docs/finder" class="nav-child ">2.6 Finder</a>
    <a href="/docs/paint" class="nav-child ">2.7 Paint</a>
    <a href="/docs/photo-booth" class="nav-child ">2.8 Photo Booth</a>
    <a href="/docs/terminal" class="nav-child ">2.9 Terminal</a>
    <a href="/docs/control-panels" class="nav-child ">2.10 Control Panels</a>
    <a href="/docs/soundboard" class="nav-child ">2.11 Soundboard</a>
    <a href="/docs/synth" class="nav-child ">2.12 Synth</a>
    <a href="/docs/videos" class="nav-child ">2.13 Videos</a>
    <a href="/docs/minesweeper" class="nav-child ">2.14 Minesweeper</a>
    <a href="/docs/virtual-pc" class="nav-child ">2.15 Virtual PC</a>
    <a href="/docs/admin" class="nav-child ">2.16 Admin</a>
    <a href="/docs/applet-store" class="nav-child ">2.17 Applet Store</a>
  </div>
</div>
<div class="nav-group ">
  <button class="nav-toggle" onclick="toggleNavGroup(this)" aria-expanded="false">
    <svg width="8" height="8" viewBox="0 0 8 8" fill="currentColor" style="transition: transform 0.2s; transform: rotate(0deg);">
      <path d="M2 0v8l4-4z"/>
    </svg>
    <a href="/docs/application-framework" class="">3. Application Framework</a>
  </button>
  <div class="nav-children" style="display: none;">
    <a href="/docs/window-management" class="nav-child ">3.1 Window Management</a>
    <a href="/docs/state-management" class="nav-child ">3.2 State Management</a>
    <a href="/docs/theme-system" class="nav-child ">3.3 Theme System</a>
    <a href="/docs/hooks-architecture" class="nav-child ">3.4 Hooks Architecture</a>
    <a href="/docs/component-architecture" class="nav-child ">3.5 Component Architecture</a>
  </div>
</div>
<div class="nav-group">
  <div class="nav-toggle nav-no-toggle">
    <span class="nav-spacer"></span>
    <a href="/docs/ai-system" class="">4. AI System</a>
  </div>
</div>
<div class="nav-group">
  <div class="nav-toggle nav-no-toggle">
    <span class="nav-spacer"></span>
    <a href="/docs/file-system" class="">5. File System</a>
  </div>
</div>
<div class="nav-group">
  <div class="nav-toggle nav-no-toggle">
    <span class="nav-spacer"></span>
    <a href="/docs/audio-system" class="">6. Audio System</a>
  </div>
</div>
<div class="nav-group ">
  <button class="nav-toggle" onclick="toggleNavGroup(this)" aria-expanded="false">
    <svg width="8" height="8" viewBox="0 0 8 8" fill="currentColor" style="transition: transform 0.2s; transform: rotate(0deg);">
      <path d="M2 0v8l4-4z"/>
    </svg>
    <a href="/docs/ui-components" class="">7. UI Components and Shared Systems</a>
  </button>
  <div class="nav-children" style="display: none;">
    <a href="/docs/component-library" class="nav-child ">7.1 Components</a>
    <a href="/docs/i18n" class="nav-child ">7.2 i18n & Hooks</a>
  </div>
</div>
<div class="nav-group ">
  <button class="nav-toggle" onclick="toggleNavGroup(this)" aria-expanded="false">
    <svg width="8" height="8" viewBox="0 0 8 8" fill="currentColor" style="transition: transform 0.2s; transform: rotate(0deg);">
      <path d="M2 0v8l4-4z"/>
    </svg>
    <a href="/docs/api-reference" class="">8. API Reference</a>
  </button>
  <div class="nav-children" style="display: none;">
    <a href="/docs/chat-api" class="nav-child ">8.1 Chat API</a>
    <a href="/docs/song-api" class="nav-child ">8.2 Song API</a>
    <a href="/docs/media-api" class="nav-child ">8.3 Media API</a>
    <a href="/docs/chat-rooms-api" class="nav-child ">8.4 Chat Rooms API</a>
    <a href="/docs/ai-generation-apis" class="nav-child ">8.5 AI Endpoints</a>
    <a href="/docs/utility-apis" class="nav-child ">8.6 Utility APIs</a>
  </div>
</div>
<div class="nav-group">
  <div class="nav-toggle nav-no-toggle">
    <span class="nav-spacer"></span>
    <a href="/docs/changelog" class="">9. Changelog</a>
  </div>
</div>
    </nav>
    
    <main class="content">
      <article>
        <h1>iPod</h1>
<p>The iPod app for syaOS brings the classic 1st generation iPod experience to your web desktop. It allows you to manage and play music from YouTube, complete with iconic features like the click wheel, cover flow, and synchronized lyrics, all within a familiar retro interface.</p>
<h2>Overview</h2>
<p>The syaOS iPod app reimagines the nostalgic charm of a classic portable music player, seamlessly integrated with modern web capabilities. It's designed for users who appreciate a focused, distraction-free music listening experience, reminiscent of early 2000s tech. Users can curate their music library by adding tracks directly from YouTube, enjoying a blend of retro aesthetics and contemporary content.</p>
<p>Beyond basic playback, the iPod app offers a rich interactive experience. Navigate your music collection with an intuitive click wheel, visually browse albums with Cover Flow, and enhance your listening with real-time synced lyrics. It's perfect for casual listening, focused work sessions with background music, or simply reliving a beloved piece of technology within the syaOS environment.</p>
<h2>Features</h2>
<p>The iPod app (v1.0) provides a rich set of features designed to emulate and enhance the classic iPod experience: <ul><li><strong>Music Management & Discovery:</strong><ul><li><strong>Add Songs from YouTube:</strong> Easily expand your music library by pasting YouTube URLs directly into the app.</li><li><strong>Dynamic Library:</strong> Your added music forms a personalized library, accessible through the classic iPod interface.</li></ul></li></ul><ul><li><strong>Intuitive Navigation & Interface:</strong><ul><li><strong>Click Wheel Navigation:</strong> Experience authentic iPod navigation using the interactive click wheel to browse menus, artists, albums, and songs.</li><li><strong>Cover Flow:</strong> Visually explore your music collection with the iconic Cover Flow interface, displaying album art in a dynamic 3D carousel.</li><li><strong>Customizable Display:</strong> Adjust backlight settings and themes to personalize your iPod's look.</li><li><strong>Fullscreen Video Playback:</strong> Switch to a fullscreen view for an immersive video experience when available.</li></ul></li><li><strong>Enhanced Playback Experience:</strong><ul><li><strong>Comprehensive Playback Controls:</strong> Full control over your music, including play, pause, skip forward/backward, and volume adjustments.</li><li><strong>Advanced Playback Modes:</strong> Utilize shuffle and repeat functionalities for individual songs or entire playlists.</li><li><strong>Synced Lyrics & Language Support:</strong> View synchronized lyrics with advanced features like translations, furigana (for Japanese), romaji, and pinyin (for Chinese), enhancing language learning or appreciation.</li></ul></li></ul></p>
<h2>User Guide</h2>
<h3>Getting Started</h3>
To begin using the iPod app, simply launch it from your syaOS desktop. The app will open to its default menu screen, replicating the classic iPod interface. Use the interactive click wheel to navigate through options and start building your music library.
<h3>Key Actions</h3>
<ul><li><strong>Adding Music:</strong> Select the "Add Songs" option from the main menu and paste a YouTube URL into the prompt to import a new track into your library.</li><li><strong>Browsing Your Library:</strong> Navigate to "Music" using the click wheel to explore your saved songs, artists, and albums. Use Cover Flow for a visually engaging browsing experience.</li><li><strong>Controlling Playback:</strong> While a song is playing, use the central play/pause button, and the skip buttons on the click wheel to manage your listening.</li><li><strong>Accessing Lyrics:</strong> During playback, select the lyrics option to view synchronized lyrics, with options for translations and phonetic aids.</li><li><strong>Adjusting Settings:</strong> Access display and playback mode settings through the main menu to customize your iPod's appearance and playback behavior.</li></ul>
<h3>Tips & Shortcuts</h3>
The click wheel is your primary interaction method; treat it like a physical iPod wheel for navigation. The central button acts as 'select,' while the outer ring allows scrolling through lists and options. Look for visual cues on the screen to understand current menu options and selected items.
<h2>Technical Details</h2>
<h3>Window Configuration</h3>
<ul><li>Default size: 300×480px</li><li>Minimum size: 300×480px</li></ul>
<h3>Component Architecture</h3>
The app consists of 14 component file(s):
<ul><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/LyricsDisplay.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/LyricsDisplay.tsx</a></code></li></ul><ul><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/FullScreenPortal.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/FullScreenPortal.tsx</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/PipPlayer.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/PipPlayer.tsx</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/IpodAppComponent.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/IpodAppComponent.tsx</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/screen/BatteryIndicator.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/screen/BatteryIndicator.tsx</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/screen/MenuListItem.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/screen/MenuListItem.tsx</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/screen/StatusDisplay.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/screen/StatusDisplay.tsx</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/screen/ScrollingText.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/screen/ScrollingText.tsx</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/screen/Scrollbar.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/screen/Scrollbar.tsx</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/screen/index.ts" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/screen/index.ts</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/CoverFlow.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/CoverFlow.tsx</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/IpodMenuBar.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/IpodMenuBar.tsx</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/IpodWheel.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/IpodWheel.tsx</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/components/IpodScreen.tsx" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/components/IpodScreen.tsx</a></code></li></ul>
<h3>Hooks & Utilities</h3>
<strong>Custom Hooks:</strong>
<ul><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/hooks/index.ts" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/hooks/index.ts</a></code></li><li><code><a href="https://github.com/syamace/syaOS/blob/main/src/apps/ipod/hooks/useLibraryUpdateChecker.ts" target="_blank" rel="noopener noreferrer" style="color: #00f; text-decoration: underline;">src/apps/ipod/hooks/useLibraryUpdateChecker.ts</a></code></li></ul>
<strong>Utilities:</strong>
No dedicated utility files are listed for this application.
<h3>State Management</h3>
The iPod app leverages Zustand for robust state management, utilizing several stores including <code>useIpodStore</code> for core music library and playback state, <code>useAudioSettingsStore</code> for audio preferences, <code>useThemeStore</code> for visual themes, and <code>useAppStore</code> for general application-level settings. This ensures a consistent and reactive user experience across the application.
<h2>Related Apps</h2>
<p>The iPod app integrates well with syaOS's system-wide <a href="/docs/audio-system">audio controls</a> for volume management. Users might also find the <a href="/docs/textedit">TextEdit</a> app useful for jotting down song ideas or creating custom playlists for later use.</p>
      </article>
      
      <nav class="nav">
        <a href="/docs/internet-explorer">← Internet Explorer</a>
        <a href="/docs/karaoke">Karaoke →</a>
      </nav>
      
    </main>
  </div>
  
  <script>
    function toggleNavGroup(button) {
      const group = button.closest('.nav-group');
      const children = group.querySelector('.nav-children');
      const svg = button.querySelector('svg');
      const isExpanded = group.classList.contains('expanded');
      
      if (isExpanded) {
        group.classList.remove('expanded');
        children.style.display = 'none';
        svg.style.transform = 'rotate(0deg)';
        button.setAttribute('aria-expanded', 'false');
      } else {
        group.classList.add('expanded');
        children.style.display = 'block';
        svg.style.transform = 'rotate(90deg)';
        button.setAttribute('aria-expanded', 'true');
      }
    }
    
    document.addEventListener('click', (e) => {
      const sidebar = document.querySelector('.sidebar');
      const menuBtn = document.querySelector('.menu-btn');
      const clickedMenuBtn = menuBtn && menuBtn.contains(e.target);
      if (sidebar.classList.contains('open') && !sidebar.contains(e.target) && !clickedMenuBtn) {
        sidebar.classList.remove('open');
      }
    });
  </script>
  <script type="module">
    import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
    mermaid.initialize({
      startOnLoad: true,
      theme: 'base',
      securityLevel: 'loose',
      themeVariables: {
        fontFamily: '"Geneva", system-ui, sans-serif',
        fontSize: '10px',
        primaryColor: '#f0f0f0',
        primaryBorderColor: '#ccc',
        primaryTextColor: '#000',
        lineColor: '#666',
        secondaryColor: '#f8f8f8',
        tertiaryColor: '#fff'
      },
      flowchart: { curve: 'basis', padding: 8, nodeSpacing: 30, rankSpacing: 30 },
      sequence: { actorFontSize: 10, messageFontSize: 10, noteFontSize: 10 }
    });
  </script>
</body>
</html>